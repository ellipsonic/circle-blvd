extends layout

block content
  .modal.fade#errorModal(tabindex="-1" role="dialog" 
    aria-labelledby="errorTitle" aria-hidden="true")
    .modal-dialog
      .modal-content
        .modal-header
          button.close(type="button" data-dismiss="modal" aria-hidden="true") &times;
          h4.modal-title#errorTitle Sorry, something didn't work

        .modal-body
          p Sorry, we failed to save what you did just now. We're still 
           | working on making the website perfect, and it seems we have
           | a bit of work to do.
          
          p If you keep seeing this message, please let us know.
          
        .modal-footer
          button.btn.btn-default(type="button" data-dismiss="modal") Close
          button.btn.btn-primary(type="button" data-dismiss="modal" ng-click="reload()") Refresh page

  .navbar.navbar-inverse.topMenu(role="navigation" ng-cloak)
    .container-fluid
      .navbar-header
        button.navbar-toggle(type="button" data-toggle="collapse" data-target="#navigation-circles")
          span.sr-only Show circles
          span.icon-bar
          span.icon-bar
          span.icon-bar
        
        a.navbar-brand(href="/") O
        .navbar-title.visible-xs(ng-if="isSignedIn()")
          h2(ng-bind="getActiveCircleName()")

      .collapse.navbar-collapse#navigation-circles
        ul.nav.navbar-nav
          li(ng-repeat="circle in circleList()" ng-class="{active: isActiveCircle(circle)}")
            a.jsLink(ng-click="setActiveCircle(circle, true)" ng-bind="circle.name")

        ul.nav.navbar-nav.navbar-right
          li(ng-show="hasMainframeAccess()" ng-class="{active: isCurrentPath('/mainframe')}")
            a(href="/#/mainframe") Mainframe access
          li(ng-class="{active: isCurrentPath('/sponsor')}")
            a(href="/#/sponsor") Sponsor
          li(ng-class="{active: isCurrentPath('/tour')}")
            a(href="/#/tour") Tour

  .container-fluid.main.debug
    .header.clearfix.debug(ng-cloak ng-if="isSignedIn()" ng-hide="!isHeaderVisible")
      //- TODO: Removing the spaces breaks the layout. Fix this.
      //- .mindset-container.hidden-xs.debug
      //-   .mindset-element.mindset-element-detailed.debug
      //-     span.glyphicon.glyphicon-move.debug(ng-click="setMindset('detailed')")

      //-   .mindset-element.debug
      //-     span.glyphicon.glyphicon-chevron-up.right.debug(ng-click="setMindset('bump')"
      //-       ng-mouseenter="setMindsetLabel('What\\'s Next')"
      //-       ng-mouseleave="setMindsetLabel('')"
      //-       ng-class="{ 'selected-mindset': isMindset('bump') }")
                
      //-     span.glyphicon.glyphicon-record.right.debug(ng-click="setMindset('mine')" 
      //-       ng-class="{ 'selected-mindset': isMindset('mine') }"
      //-       ng-mouseenter="setMindsetLabel('Status Update')"
      //-       ng-mouseleave="setMindsetLabel('')")

      //-     span.glyphicon.glyphicon-road.right.debug(ng-click="setMindset('roadmap')"
      //-       ng-class="{ 'selected-mindset': isMindset('roadmap') }" 
      //-       ng-mouseenter="setMindsetLabel('Roadmap')"
      //-       ng-mouseleave="setMindsetLabel('')")

      //-     .label.debug(ng-bind="mindsetLabel") 

      h2.debug.hidden-xs.title
        a(href="/" ng-bind="getActiveCircleName()")

      .col-xs-12.debug
        ul.menu.debug
          li
            a(href="/") List
            span 
          li
            a(href="/archives/") Archives
            span 
          li
            a(href="/#/lists") Checklists
            span 
          li
            a(href="/#/profile") Profile
            span 
          li.hidden-xs(ng-show="isAdmin()")
            a(href="/#/admin") Admin
            span 
          
          li
            a.jsLink(ng-click="signOut()") Sign&nbsp;out

    block view

  .footer.hidden-xs
    div a <a href="http://secretproject.org">secret project</a>: circle boulevard . 
     | v<span>#{version}</span> .
     | <a href="/#/about">about</a> .
     | <a href="/#/privacy">privacy</a> .
     | <a href="/#/contact">contact</a> .
     | <a href="https://twitter.com/circleblvd">follow</a> .
     | <a href="/#/sponsor">sponsor</a>

    div <a href="https://github.com/secret-project/circle-blvd">source code</a> on GitHub .
     | <span>some icons, courtesy <a href="http://www.glyphicons.com">Glyphicons</a></span>

  .footer.visible-xs
    div circle boulevard . v<span>#{version}</span>
    div 
      span some icons, courtesy <a href="http://www.glyphicons.com">Glyphicons</a>
    div <a href="https://github.com/secret-project/circle-blvd">source code</a> on GitHub
